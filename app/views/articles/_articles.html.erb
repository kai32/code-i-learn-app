<% obj.each do |article| %>
  <div class="row">
    <div class="col-md-12">
      <div class="well well-lg">
        
        <div class="article-title">
          <%= link_to ("#{article.title} "), article_path(article) %> 
          <small>
            <%= "<span class='label label-md label-info'><i class='fa fa-star'></i>Featured</span>".html_safe if article.is_featured? %>
          </small>
        </div>
        
        <div class="article-body">
          <% if article.description %>
            <%= truncate(strip_tags(article.description), length: 100) %>  
          <% else %>
            <%= truncate(strip_tags(article.content), length: 100) %>  
          <% end %>
        <div class="article-meta-details">
          <small>Created by: <%=article.user.full_name if article.user %>,
              <%= time_ago_in_words(article.created_at) %> ago,
              last updated: <%= time_ago_in_words(article.updated_at) %> ago
          </small>
          <% if article.categories.any? %>
            <p>Categories: <%= render article.categories %> &nbsp;</p>
          <% end %>
        </div>
          
          
        </div>
        
        
        <% if current_user && (current_user == article.user || current_user.is_admin?) %>
          <div class="article-actions">
            <%= link_to "Edit this article", edit_article_path(article), class: "btn btn-xs btn-success"%>
            <%= link_to "Delete this article", article_path(article), method: :delete, 
                                          data: { confirm: "Are you sure you want to delete the article?" }, 
                                          class: "btn btn-xs btn-danger" %>
            <% if current_user.is_admin? %>
              <%= link_to "#{article.is_featured? ? "Remove feature" : "Feature"}", toggle_feature_articles_path(id: article.id),
                  method: :patch, class: "btn btn-xs btn-primary" %>
            <% end %>
      
          </div>
        <% end %>
        
      </div>
    </div>
  </div>
  
<% end %>
